{"version":3,"file":"slide.service.js","sourceRoot":"","sources":["../../.tmp/slide/slide.service.ts"],"names":[],"mappings":";;;;;;;;;AAAA,OAAO,EAAE,UAAU,EAA6B,MAAM,eAAe,CAAC;AACtE,OAAO,EAAE,cAAc,EAAE,sBAAsB,EAAE,MAAM,uBAAuB,CAAC;AAC/E,OAAO,EACH,sBAAsB,EAEzB,MAAM,gCAAgC,CAAC;AACxC,OAAO,EAAE,0BAA0B,EAAE,MAAM,6BAA6B,CAAC;AACzE,OAAO,EAAE,WAAW,EAAE,MAAM,qBAAqB,CAAC;AAGlD;IAYI,yBAAoB,GAA2B;QAA3B,QAAG,GAAH,GAAG,CAAwB;QAXvC,oBAAe,GAGjB,EAAE,CAAC;QAMD,YAAO,GAAG,KAAK,CAAC;IAE0B,CAAC;IAE5C,8BAAI,GAAX,UACI,OAAwC,EACxC,MAAuB;QAF3B,iBAQC;QAJG,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;QACrB,UAAU,CAAC;YACP,KAAI,CAAC,KAAK,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;QAChC,CAAC,CAAC,CAAC;IACP,CAAC;IAEO,+BAAK,GAAb,UACI,OAAwC,EACxC,MAAuB;QAF3B,iBA8CC;QA1CG,IAAI,IAAI,CAAC,eAAe,CAAC,MAAM,GAAG,CAAC,EAAE;YACjC,IAAM,cAAc,GAAG,IAAI,CAAC,eAAe,CACvC,IAAI,CAAC,eAAe,CAAC,MAAM,GAAG,CAAC,CAClC,CAAC;YACF,IAAI,cAAc,IAAI,cAAc,CAAC,MAAM,EAAE;gBACzC,IAAM,MAAM,GAAG,cAAc,CAAC,MAAM,CAAC,GAAG,CAAC;gBACzC,IAAM,MAAM,GAAG,MAAM,IAAI,MAAM,CAAC,GAAG,CAAC;gBACpC,IAAI,MAAM,IAAI,MAAM,IAAI,MAAM,KAAK,MAAM,EAAE;oBACvC,IAAI,CAAC,IAAI,EAAE,CAAC;oBACZ,OAAO;iBACV;aACJ;SACJ;QAED,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,sBAAsB,EAAE,MAAM,CAAC,CAAC;QAEjE,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,GAAG,CAAC,YAAY,CACrC,IAAI,EACJ,IAAI,EACJ,IAAI,CACP,CAAC;QAEF,IAAM,WAAW,GAAG,IAAI,WAAW,EAAE,CAAC;QACtC,WAAW,CAAC,IAAI,GAAG;YACf,KAAI,CAAC,IAAI,EAAE,CAAC;QAChB,CAAC,CAAC;QACF,WAAW,CAAC,OAAO,GAAG,OAAO,IAAI,IAAI,CAAC;QACtC,IAAI,CAAC,YAAY;aACZ,OAAO,CAAC,EAAE,OAAO,EAAE,WAAW,EAAE,QAAQ,EAAE,WAAW,EAAE,CAAC;aACxD,OAAO,CAAC,EAAE,OAAO,EAAE,cAAc,EAAE,QAAQ,EAAE,IAAI,CAAC,OAAO,EAAE,CAAC;aAC5D,MAAM,CAAC,0BAA0B,CAAC;aAClC,EAAE,CAAC,MAAM,CAAC;aACV,IAAI,CAAC;YACF,OAAO,SAAA;YACP,YAAY,EAAE,IAAI,CAAC,OAAO,CAAC,YAAY;YACvC,WAAW,EAAE,WAAW;YACxB,eAAe,EAAE,IAAI;SACxB,CAAC,CAAC;QACP,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC;YACtB,MAAM,EAAE,IAAI,CAAC,OAAO;YACpB,WAAW,EAAE,IAAI,CAAC,YAAY;SACjC,CAAC,CAAC;IACP,CAAC;IAEM,8BAAI,GAAX;QACI,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QACpB,IAAI,CAAC,KAAK,EAAE,CAAC;IACjB,CAAC;IAEO,+BAAK,GAAb;QAAA,iBAeC;QAdG,UAAU,CAAC;YACP,IAAI,KAAI,CAAC,eAAe,CAAC,MAAM,GAAG,CAAC,EAAE;gBACjC,IAAM,cAAc,GAAG,KAAI,CAAC,eAAe,CACvC,KAAI,CAAC,eAAe,CAAC,MAAM,GAAG,CAAC,CAClC,CAAC;gBACF,IAAI,cAAc,IAAI,cAAc,CAAC,WAAW,EAAE;oBAC9C,cAAc,CAAC,WAAW,CAAC,IAAI,EAAE,CAAC;oBAClC,KAAI,CAAC,eAAe,CAAC,MAAM,CACvB,KAAI,CAAC,eAAe,CAAC,MAAM,GAAG,CAAC,EAC/B,CAAC,CACJ,CAAC;iBACL;aACJ;QACL,CAAC,EAAE,GAAG,CAAC,CAAC;IACZ,CAAC;IA5FQ,eAAe;QAD3B,UAAU,EAAE;yCAagB,sBAAsB;OAZtC,eAAe,CA6F3B;IAAD,sBAAC;CAAA,AA7FD,IA6FC;SA7FY,eAAe","sourcesContent":["import { Injectable, TemplateRef, HostListener } from '@angular/core';\nimport { ThySlideOption, thySlideOptionDefaults } from './slide-options.class';\nimport {\n    ComponentLoaderFactory,\n    ComponentLoader\n} from 'ngx-bootstrap/component-loader';\nimport { ThySlideContainerComponent } from './slide-container.component';\nimport { ThySlideRef } from './slide-ref.service';\n\n@Injectable()\nexport class ThySlideService {\n    private openedSlideRefs: {\n        config: ThySlideOption;\n        thySlideRef: ThySlideRef;\n    }[] = [];\n\n    private _slideLoader: ComponentLoader<ThySlideContainerComponent>;\n\n    private _config: ThySlideOption;\n\n    private _isHide = false;\n\n    constructor(private clf: ComponentLoaderFactory) {}\n\n    public show(\n        content: string | TemplateRef<any> | any,\n        config?: ThySlideOption\n    ) {\n        this._isHide = false;\n        setTimeout(() => {\n            this._show(content, config);\n        });\n    }\n\n    private _show(\n        content: string | TemplateRef<any> | any,\n        config?: ThySlideOption\n    ) {\n        if (this.openedSlideRefs.length > 0) {\n            const openedSlideRef = this.openedSlideRefs[\n                this.openedSlideRefs.length - 1\n            ];\n            if (openedSlideRef && openedSlideRef.config) {\n                const oldKey = openedSlideRef.config.key;\n                const newKey = config && config.key;\n                if (oldKey && newKey && oldKey === newKey) {\n                    this.hide();\n                    return;\n                }\n            }\n        }\n\n        this._config = Object.assign({}, thySlideOptionDefaults, config);\n\n        this._slideLoader = this.clf.createLoader<ThySlideContainerComponent>(\n            null,\n            null,\n            null\n        );\n\n        const thySlideRef = new ThySlideRef();\n        thySlideRef.hide = () => {\n            this.hide();\n        };\n        thySlideRef.content = content || null;\n        this._slideLoader\n            .provide({ provide: ThySlideRef, useValue: thySlideRef })\n            .provide({ provide: ThySlideOption, useValue: this._config })\n            .attach(ThySlideContainerComponent)\n            .to('body')\n            .show({\n                content,\n                initialState: this._config.initialState,\n                thySlideRef: thySlideRef,\n                thySlideService: this\n            });\n        this.openedSlideRefs.push({\n            config: this._config,\n            thySlideRef: this._slideLoader\n        });\n    }\n\n    public hide() {\n        this._isHide = true;\n        this._hide();\n    }\n\n    private _hide() {\n        setTimeout(() => {\n            if (this.openedSlideRefs.length > 0) {\n                const openedSlideRef = this.openedSlideRefs[\n                    this.openedSlideRefs.length - 1\n                ];\n                if (openedSlideRef && openedSlideRef.thySlideRef) {\n                    openedSlideRef.thySlideRef.hide();\n                    this.openedSlideRefs.splice(\n                        this.openedSlideRefs.length - 1,\n                        1\n                    );\n                }\n            }\n        }, 200);\n    }\n}\n"]}