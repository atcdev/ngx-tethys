{"version":3,"file":"editor.service.js","sourceRoot":"","sources":["../../.tmp/editor/editor.service.ts"],"names":[],"mappings":"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","sourcesContent":["import { Injectable, OnInit, OnDestroy, ElementRef, Renderer2 } from '@angular/core';\nimport { thyEditorConstant } from './editor.constant';\nimport { helpers } from '../util';\nexport interface ThyEditorConfig {\n    type?: string;\n    placeholder?: string;\n    uploadImg?: {\n        multiple?: boolean;\n        acceptType?: string | string[];\n    };\n}\n\nexport interface ThyEditorOptions {\n    placeholder: string;\n    fontSize: string;\n    theme: string;\n    maxHeight: number;\n    isHeightFull: boolean;\n    className: string;\n    autofocus: boolean;\n    type: string;\n    locale: string;\n    hideButtons: string[];\n    additionalButtons: string[];\n    replaceButtons: string[];\n    extendButtons: string[];\n    uploadImgMultiple: boolean;\n    uploadImgAcceptType: string | string[];\n}\n@Injectable()\nexport class ThyEditorService implements OnInit, OnDestroy {\n    public options: ThyEditorOptions = {\n        placeholder: '输入内容...',\n        fontSize: '16px',\n        theme: 'kuroir',\n        maxHeight: 600,\n        isHeightFull: false,\n        className: '',\n        autofocus: true, // 默认聚焦\n        type: 'simple', // toolbar按钮显示的类型 ［simple:简易, all:全部按钮］\n        locale: 'zh-cn', // 国际化设置\n        hideButtons: [],\n        additionalButtons: [],\n        replaceButtons: [],\n        extendButtons: [],\n        uploadImgMultiple: true,\n        uploadImgAcceptType: ['.gif', '.jpeg', '.png']\n    };\n    // public hideButtons: any = []; // 要不显示的图标[]\n    // public additionalButtons: any = []; // 扩展的图标 {title:'扩展',className:'fa fa-music',type:'custom',action:musicFn,before:2}\n    // public replaceButtons: any = []; // 替换默认的图标 {title:'插入图片',className:'fa fa-file-image-o',type:'custom',action:imageFn,id:17}\n    // public extendButtons: any = [];\n    public toolbars: any = [];\n    public headers: any = [];\n    public elementRef: ElementRef;\n    public editorWrap: any;\n    public textareaDom: any;\n    public previewDom: any;\n    public header_action: Boolean = false;\n    public isPreview: Boolean = false;\n\n    public tableOptions = {\n        table_action: false,\n        tableActiveX: 1,\n        tableActiveY: 1,\n        tableMenu: thyEditorConstant.tableMenu\n    };\n\n    constructor(private renderer: Renderer2) {}\n\n    ngOnInit() {}\n\n    ngOnDestroy() {\n        this.clear();\n    }\n\n    getSelection() {\n        return {\n            target: this.textareaDom,\n            start: this.textareaDom.selectionStart,\n            end: this.textareaDom.selectionEnd,\n            text: this.textareaDom.value.substring(this.textareaDom.selectionStart, this.textareaDom.selectionEnd)\n        };\n    }\n\n    hasSelection() {\n        if (this.textareaDom.selectionStart === this.textareaDom.selectionEnd) {\n            return false;\n        } else {\n            return true;\n        }\n    }\n    emojiFn(htmlstr: string) {\n        // return htmlstr.replace(thyEditorConstant.emojRegx, function (match) {\n        //     if (thyEditorConstant.emojis.indexOf(match) !== -1) {\n        //         const name = String(match).slice(1, -1);\n        //         return '<img class=\"emoji\" title=\":' + name + ':\" alt=\"' +\n        //             name + '\" src=\"https://s.tylingsoft.com/emoji-icons/' + name + '.png\" width=\"18\" />';\n        //     } else {\n        //         return match;\n        //     }\n        // });\n    }\n\n    insertText(text: string, start: number, end: number) {\n        this.textareaDom.focus();\n        const leftText = this.textareaDom.value.substring(0, start);\n        const rightText = this.textareaDom.value.substring(end);\n        this.textareaDom.value = leftText + text + rightText;\n    }\n\n    getInsertText(text: string, start: number, end: number) {\n        this.textareaDom.focus();\n        const leftText = this.textareaDom.value.substring(0, start);\n        const rightText = this.textareaDom.value.substring(end);\n        return leftText + text + rightText;\n    }\n\n    clearSelection() {\n        this.textareaDom.selectionStart = this.textareaDom.selectionEnd;\n    }\n\n    setFocus(star: number, end: number) {\n        setTimeout(() => {\n            this.textareaDom.selectionStart = star;\n            this.textareaDom.selectionEnd = end;\n        });\n    }\n\n    isRowFirst(start: number) {\n        const val = this.textareaDom.value.substr(0, start);\n        const _text = val.substr(val.lastIndexOf('\\n') + 1);\n        if (_text.length === 0) {\n            return true;\n        }\n        return false;\n    }\n\n    getRowText(start: number) {\n        const val = this.textareaDom.value.substr(0, start);\n        const _text = val.substr(val.lastIndexOf('\\n') + 1);\n        return _text;\n    }\n\n    // replaceContent(content: string, sel: any) {\n    //     this.insertText(content, sel.start, sel.end);\n    //     this.textareaDom.focus();\n    // }\n\n    insertContent(content: string, change?: Function) {\n        const sel = this.getSelection();\n        change(this.getInsertText(content, sel.start, sel.end));\n        this.textareaDom.focus();\n    }\n\n    setOptions(config: ThyEditorConfig) {\n        if (config) {\n            this.options = Object.assign(this.options, config);\n            if (config && config.uploadImg) {\n                if (config.uploadImg.multiple) {\n                    this.options.uploadImgMultiple = config.uploadImg.multiple;\n                }\n                if (config.uploadImg.acceptType) {\n                    this.options.uploadImgAcceptType = config.uploadImg.acceptType;\n                }\n            }\n        }\n    }\n\n    setToolbars() {\n        // this.toolbars = [];\n        thyEditorConstant.typeArray[this.options.type].forEach((value: string, index: number) => {\n            let _tempBtn = thyEditorConstant.allButtons[value];\n            if (!_tempBtn) {\n                _tempBtn = this.options.extendButtons[value];\n            }\n            if (_tempBtn) {\n                this.toolbars[this.toolbars.length] = _tempBtn;\n            }\n        });\n\n        thyEditorConstant.typeArray['hs'].forEach((value: string, index: number) => {\n            const _tempBtn = thyEditorConstant.allButtons[value];\n            if (_tempBtn) {\n                this.headers[this.headers.length] = _tempBtn;\n            }\n        });\n\n        if (this.options.hideButtons.length > 0) {\n            this.options.hideButtons.forEach((n: any) => {\n                if (n.id) {\n                    const _index = this.toolbars.findIndex((t: any) => {\n                        return n.id === t.id;\n                    });\n                    this.toolbars.splice(_index, 1);\n                }\n            });\n        }\n\n        if (this.options.replaceButtons.length > 0) {\n            this.options.replaceButtons.forEach((n: any) => {\n                if (n.id) {\n                    const _index = this.toolbars.findIndex((t: any) => {\n                        return n.id === t.id;\n                    });\n                    this.toolbars.splice(_index, 1, n);\n                }\n            });\n        }\n\n        if (this.options.additionalButtons.length > 0) {\n            this.options.additionalButtons.forEach((n: any) => {\n                if (n.before) {\n                    const _index = this.toolbars.findIndex(this.toolbars, (t: any) => {\n                        return t.id === n.before;\n                    });\n                    this.toolbars.splice(_index, 0, n);\n                } else {\n                    this.toolbars.push(n);\n                }\n            });\n        }\n    }\n\n    initEditor(config: {}, elementRef: ElementRef, editorWrap: ElementRef) {\n        this.setOptions(config);\n        this.elementRef = elementRef;\n        this.editorWrap = editorWrap.nativeElement;\n        this.textareaDom = this.elementRef.nativeElement.querySelector('.thy-editor-textarea');\n        this.previewDom = this.elementRef.nativeElement.querySelector('.thy-editor-container-preview-body');\n        this.setToolbars();\n        if (this.options.autofocus) {\n            setTimeout(() => {\n                this.textareaDom.focus();\n                this.focusEditor();\n            }, 200);\n        }\n        if (this.options.isHeightFull) {\n            this.textareaDom.style.height = '100%';\n        }\n    }\n\n    focusEditor() {\n        this.renderer.addClass(this.editorWrap, 'thy-editor-focus');\n    }\n\n    blurEditor() {\n        this.renderer.removeClass(this.editorWrap, 'thy-editor-focus');\n    }\n\n    getLocaleText(key: string) {\n        let _locale = thyEditorConstant.language[this.options.locale];\n        if (_locale) {\n            const _localText = _locale[key];\n            if (_localText) {\n                return _localText;\n            } else {\n                console.log('text ' + key + ' none!');\n            }\n        } else {\n            console.log('locale ' + this.options.locale + ' none!');\n            _locale = thyEditorConstant.language['zh-cn'];\n            const _localText = _locale[key];\n            if (_localText) {\n                return _localText;\n            } else {\n                console.log('text ' + key + ' none!');\n            }\n        }\n    }\n\n    insert(flag: any, title: string, sel: any, keepSelection: any, search: any, replace: any, change: Function) {\n        // 有序列表和无序列表选择统一添加\n        if (sel.text.indexOf('\\n') !== -1 && keepSelection && search && replace) {\n            if (sel.text.length > 0) {\n                sel = this.getSelection();\n            }\n            const replaceStr = sel.text.replace(search, replace);\n            const _sub = this.getRowText(sel.start);\n            // this.insertText(replaceStr, sel.start - _sub.length, sel.end);\n            change(this.getInsertText(replaceStr, sel.start - _sub.length, sel.end));\n            this.setFocus(sel.start + replaceStr.length, sel.start + replaceStr.length);\n        } else {\n            if (sel.text.length > 0) {\n                this.clearSelection();\n                sel = this.getSelection();\n            }\n            const _sub = this.getRowText(sel.start);\n            // this.insertText(flag + ' ' + _sub, sel.start - _sub.length, sel.end);\n            change(this.getInsertText(flag + ' ' + _sub, sel.start - _sub.length, sel.end));\n            this.setFocus(sel.start + flag.length + 1, sel.start + flag.length + 1);\n        }\n    }\n\n    // 插入markdown\n    styleFn(param: string, event: Event, change: Function) {\n        let sel = this.getSelection();\n        switch (param) {\n            case 'bold':\n                if (this.hasSelection()) {\n                    if (sel.text.indexOf('\\n') !== -1) {\n                        sel = this.getSelection();\n                        const _str = sel.text.replace(/([^\\n]+)([\\n\\s]*)/g, '**$1**$2');\n                        const _sub = this.getRowText(sel.start);\n                        change(this.getInsertText(_str, sel.start - _sub.length, sel.end));\n                        this.setFocus(sel.start + _str.length, sel.start + _str.length);\n                    } else {\n                        change(this.getInsertText(' **' + sel.text + '** ', sel.start, sel.end));\n                        this.setFocus(sel.start, sel.start + 6 + sel.text.length);\n                    }\n                } else {\n                    const _sub = this.getRowText(sel.start);\n                    if (_sub.length > 0) {\n                        // this.insertText(' **** ', sel.start, sel.end);\n                        change(this.getInsertText(' **** ', sel.start, sel.end));\n                        this.setFocus(sel.start + 3, sel.start + 3);\n                    } else {\n                        // this.insertText('****', sel.start, sel.end);\n                        change(this.getInsertText('****', sel.start, sel.end));\n                        this.setFocus(sel.start + 2, sel.start + 2);\n                    }\n                }\n                break;\n            case 'italic':\n                if (this.hasSelection()) {\n                    if (sel.text.indexOf('\\n') !== -1) {\n                        sel = this.getSelection();\n                        const _str = sel.text.replace(/([^\\n]+)([\\n\\s]*)/g, '_$1_$2');\n                        const _sub = this.getRowText(sel.start);\n                        // this.insertText(_str, sel.start - _sub.length, sel.end);\n                        change(this.getInsertText(_str, sel.start - _sub.length, sel.end));\n                        this.setFocus(sel.start + _str.length, sel.start + _str.length);\n                    } else {\n                        // this.insertText(' *' + sel.text + '* ', sel.start, sel.end);\n                        change(this.getInsertText(' *' + sel.text + '* ', sel.start, sel.end));\n                        this.setFocus(sel.start, sel.start + 4 + sel.text.length);\n                    }\n                } else {\n                    const _sub = this.getRowText(sel.start);\n                    if (_sub.length > 0) {\n                        // this.insertText(' ** ', sel.start, sel.end);\n                        change(this.getInsertText(' ** ', sel.start, sel.end));\n                        this.setFocus(sel.start + 2, sel.start + 2);\n                    } else {\n                        // this.insertText('**', sel.start, sel.end);\n                        change(this.getInsertText('**', sel.start, sel.end));\n                        this.setFocus(sel.start + 1, sel.start + 1);\n                    }\n                }\n                break;\n            case 'underline':\n                if (this.hasSelection()) {\n                    if (sel.text.indexOf('\\n') !== -1) {\n                        sel = this.getSelection();\n                        const _str = sel.text.replace(/([^\\n]+)([\\n\\s]*)/g, '<u>$1</u>$2');\n                        const _sub = this.getRowText(sel.start);\n                        // this.insertText(_str, sel.start - _sub.length, sel.end);\n                        change(this.getInsertText(_str, sel.start - _sub.length, sel.end));\n                        this.setFocus(sel.start + _str.length, sel.start + _str.length);\n                    } else {\n                        // this.insertText('<u>' + sel.text + '</u>', sel.start, sel.end);\n                        change(this.getInsertText('<u>' + sel.text + '</u>', sel.start, sel.end));\n                        this.setFocus(sel.start, sel.start + 7 + sel.text.length);\n                    }\n                } else {\n                    change(this.getInsertText('<u></u>', sel.start, sel.end));\n                    this.setFocus(sel.start + 3, sel.start + 3);\n                }\n                break;\n            case 'strikethrough':\n                if (this.hasSelection()) {\n                    if (sel.text.indexOf('\\n') !== -1) {\n                        sel = this.getSelection();\n                        const replaceStr = sel.text.replace(/([^\\n]+)([\\n\\s]*)/g, ' ~~$1~~ $2');\n                        const _sub = this.getRowText(sel.start);\n                        // this.insertText(replaceStr, sel.start - _sub.length, sel.end);\n                        change(this.getInsertText(replaceStr, sel.start - _sub.length, sel.end));\n                        this.setFocus(sel.start + replaceStr.length, sel.start + replaceStr.length);\n                    } else {\n                        // this.insertText(' ~~' + sel.text + '~~ ', sel.start, sel.end);\n                        change(this.getInsertText(' ~~' + sel.text + '~~ ', sel.start, sel.end));\n                        this.setFocus(sel.start, sel.start + 6 + sel.text.length);\n                    }\n                } else {\n                    const _sub = this.getRowText(sel.start);\n                    if (_sub.length > 0) {\n                        // this.insertText(' ~~~~ ', sel.start, sel.end);\n                        change(this.getInsertText(' ~~~~ ', sel.start, sel.end));\n                        this.setFocus(sel.start + 3, sel.start + 3);\n                    } else {\n                        // this.insertText('~~~~', sel.start, sel.end);\n                        change(this.getInsertText('~~~~', sel.start, sel.end));\n                        this.setFocus(sel.start + 2, sel.start + 2);\n                    }\n                }\n                break;\n            case 'h1':\n                this.insert('#', '', sel, true, /(.+)([\\n]?)/g, '\\n# $1$2\\n', change);\n                this.header_action = false;\n                break;\n            case 'h2':\n                this.insert('##', '', sel, true, /(.+)([\\n]?)/g, '\\n## $1$2\\n', change);\n                this.header_action = false;\n                break;\n            case 'h3':\n                this.insert('###', '', sel, true, /(.+)([\\n]?)/g, '\\n### $1$2\\n', change);\n                this.header_action = false;\n                break;\n            case 'h4':\n                this.insert('####', '', sel, true, /(.+)([\\n]?)/g, '\\n#### $1$2\\n', change);\n                this.header_action = false;\n                break;\n            case 'h5':\n                this.insert('#####', '', sel, true, /(.+)([\\n]?)/g, '\\n##### $1$2\\n', change);\n                this.header_action = false;\n                break;\n            case 'h6':\n                this.insert('######', '', sel, true, /(.+)([\\n]?)/g, '\\n###### $1$2\\n', change);\n                this.header_action = false;\n                break;\n            case 'hr':\n                if (sel.text.length > 0) {\n                    this.clearSelection();\n                    sel = this.getSelection();\n                }\n                // this.insertText('\\n---\\n', sel.start, sel.end);\n                change(this.getInsertText('\\n---\\n', sel.start, sel.end));\n                this.setFocus(sel.start + 5, sel.start + 5);\n                break;\n            case 'quote':\n                this.insert('>', '', sel, true, /(.+)([\\n]?)/g, '\\n> $1$2', change);\n                break;\n            case 'list':\n                this.insert('-', '', sel, true, /(.+)([\\n]?)/g, '\\n- $1$2', change);\n                break;\n            case 'list-2':\n                this.insert('1.', '', sel, true, /(.+)([\\n]?)/g, '\\n1. $1$2', change);\n                break;\n\n            case 'square':\n                this.insert('- [ ] ', '', sel, true, /(.+)([\\n]?)/g, '- [ ] $1$2', change);\n                break;\n            case 'check-square':\n                this.insert('- [x] ', '', sel, true, /(.+)([\\n]?)/g, '- [x] $1$2', change);\n                break;\n\n            case 'link':\n                let _iUrl = 'http://example.com';\n                let _localText = this.getLocaleText('link-text');\n                if (sel.text.length > 0) {\n                    if (sel.text.indexOf('http') !== -1) {\n                        _iUrl = sel.text;\n                    } else {\n                        _localText = sel.text;\n                    }\n                }\n                const _aUrl = '[' + _localText + '](' + _iUrl + ')';\n                // this.insertText(_aUrl, sel.start, sel.end);\n                change(this.getInsertText(_aUrl, sel.start, sel.end));\n                this.setFocus(sel.start + _aUrl.length, sel.start + _aUrl.length);\n                break;\n            case 'image':\n                let _imageText = this.getLocaleText('image-text');\n                let iUrl = 'http://lesschat.com/x.png';\n                if (sel.text.length > 0) {\n                    if (sel.text.indexOf('http') !== -1) {\n                        iUrl = sel.text;\n                    } else {\n                        _imageText = sel.text;\n                    }\n                }\n                const aUrl = '![' + _imageText + '](' + iUrl + ')';\n                // this.insertText(aUrl, sel.start, sel.end);\n                change(this.getInsertText(aUrl, sel.start, sel.end));\n                this.setFocus(sel.start + aUrl.length, sel.start + aUrl.length);\n                break;\n            case 'code':\n                if (sel.text.length === 0) {\n                    // this.insertText('\\n```\\n  \\n```\\n', sel.start, sel.end);\n                    change(this.getInsertText('\\n```\\n  \\n```\\n', sel.start, sel.end));\n                    this.setFocus(sel.start + 6, sel.start + 6);\n                } else {\n                    change(this.getInsertText('`' + sel.text + '`', sel.start, sel.end));\n                    this.setFocus(sel.start + 2 + sel.text.length, sel.start + 2 + sel.text.length);\n                }\n                break;\n            case 'table':\n                this.tableOptions.table_action = true;\n                break;\n            case 'math':\n                let _mathText = sel.text;\n                if (_mathText.length === 0) {\n                    _mathText = 'E = mc^2';\n                }\n                change(this.getInsertText('\\n```math\\n' + _mathText + '\\n```\\n', sel.start, sel.end));\n                this.setFocus(sel.start + _mathText.length + 14, sel.start + _mathText.length + 14);\n                break;\n            case 'flow':\n                let flowText = sel.text;\n                if (flowText.length === 0) {\n                    flowText = 'graph LR\\nA-->B';\n                }\n                change(this.getInsertText('\\n```\\n' + flowText + '\\n```\\n', sel.start, sel.end));\n                this.setFocus(sel.start + flowText.length + 10, sel.start + flowText.length + 10);\n                break;\n            case 'diagram':\n                let diagramText = sel.text;\n                if (diagramText.length === 0) {\n                    // text = 'sequenceDiagram\\nA->>B: 你好吗?\\nB->>A: 我很好3!';\n                    diagramText = this.getLocaleText('diagram');\n                }\n                change(this.getInsertText('\\n```\\n' + diagramText + '\\n```\\n', sel.start, sel.end));\n                this.setFocus(sel.start + diagramText.length + 10, sel.start + diagramText.length + 10);\n                break;\n            case 'gantt':\n                let ganttText = sel.text;\n                if (ganttText.length === 0) {\n                    // ganttText = $($event.target).data('sample');\n                    ganttText = 'gantt\\n';\n                    ganttText += 'dateFormat YYYY-MM-DD\\n';\n                    ganttText += 'section S1\\n';\n                    ganttText += 'T1: 2014-01-01, 9d\\n';\n                    ganttText += 'section S2\\n';\n                    ganttText += 'T2: 2014-01-11, 9d';\n                    ganttText += 'section S3\\n';\n                    ganttText += 'T3: 2014-01-02, 9d';\n                }\n                change(this.getInsertText('\\n```\\n' + ganttText + '\\n```\\n', sel.start, sel.end));\n                this.setFocus(sel.start + ganttText.length + 10, sel.start + ganttText.length + 10);\n                break;\n        }\n        this.setTextareaHeight();\n    }\n\n    togglePreview() {}\n\n    setTextareaHeight() {\n        if (this.options.isHeightFull) {\n            return;\n        }\n        let _height = this.textareaDom.scrollHeight;\n        if (_height > this.options.maxHeight) {\n            _height = this.options.maxHeight;\n        }\n        this.textareaDom.style.height = _height + 'px';\n    }\n\n    setTable(x: number, y: number, action: boolean) {\n        this.tableOptions.tableActiveX = x;\n        this.tableOptions.tableActiveY = y;\n        this.tableOptions.table_action = action;\n    }\n\n    insertTable(change: Function) {\n        const cols = this.tableOptions.tableActiveY;\n        const rows = this.tableOptions.tableActiveX + 1;\n        let _header = this.getLocaleText('col');\n        let _header_hr = '---';\n        let _row = this.getLocaleText('row');\n\n        for (let i = 0; i < cols; i++) {\n            _header += '| ' + this.getLocaleText('col') + ' ';\n            _header_hr += '| --- ';\n            _row += '| ' + this.getLocaleText('row') + ' ';\n        }\n        let _str = '';\n        for (let i = 0; i < rows; i++) {\n            _str += _row + '\\n';\n        }\n\n        const sample = _header + '\\n' + _header_hr + '\\n' + _str;\n        let sel = this.getSelection();\n        if (sel.text.length > 0) {\n            this.clearSelection();\n            sel = this.getSelection();\n        }\n        let _strHTML = '';\n        if (this.isRowFirst(sel.start)) {\n            _strHTML = this.getInsertText('\\n' + sample + '\\n\\n', sel.start, sel.end);\n            change(_strHTML);\n            // this.insertText('\\n' + sample + '\\n\\n', sel.start, sel.end);\n            this.setFocus(sel.start + sample.length + 2, sel.start + sample.length + 2);\n        } else {\n            _strHTML = this.getInsertText('\\n\\n' + sample + '\\n\\n', sel.start, sel.end);\n            change(_strHTML);\n            // this.insertText('\\n\\n' + sample + '\\n\\n', sel.start, sel.end);\n            this.setFocus(sel.start + sample.length + 4, sel.start + sample.length + 4);\n        }\n\n        change(_strHTML);\n\n        this.tableOptions.table_action = false;\n        this.setTextareaHeight();\n    }\n\n    clear() {\n        this.toolbars = null;\n        this.headers = null;\n        this.tableOptions.tableMenu = null;\n    }\n}\n"]}