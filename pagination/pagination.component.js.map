{"version":3,"file":"pagination.component.js","sourceRoot":"","sources":["../../.tmp/pagination/pagination.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n    Component,\n    Input,\n    HostBinding,\n    OnInit,\n    Output,\n    EventEmitter,\n    forwardRef,\n    Provider,\n    ElementRef\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { UpdateHostClassService } from '../shared';\n\nexport interface PageChangedEvent {\n    itemsPerPage: number;\n    page: number;\n}\n\nexport type ThyPaginationMaxSize = 'xs' | 'sm' | 'md';\n\nexport const PAGINATION_CONTROL_VALUE_ACCESSOR: Provider = {\n    provide: NG_VALUE_ACCESSOR,\n    /* tslint:disable-next-line: no-use-before-declare */\n    useExisting: forwardRef(() => ThyPaginationComponent),\n    multi: true\n};\n\n@Component({\n    selector: 'thy-pagination',\n    template: \"<button class=\\\"thy-pagination-btn btn-prev wtf wtf-angle-left\\\" [class.disabled]=\\\"page === 1\\\" (click)=\\\"nextHandle(-1)\\\" ></button> <thy-pagination-pager [reservedNum]=\\\"reservedNum\\\" [pagerSize]=\\\"pagerSize\\\" [current]=\\\"page\\\" [count]=\\\"totalPages\\\" (clickPage)=\\\"nextHandle($event)\\\" *ngIf=\\\"inited\\\" [mini]=\\\"thySize === 'xs'\\\" ></thy-pagination-pager> <button class=\\\"thy-pagination-btn btn-next wtf wtf-angle-right\\\" [class.disabled]=\\\"page === totalPages\\\" (click)=\\\"nextHandle(1)\\\" ></button> <thy-pagination-jump *ngIf=\\\"inited && thyJump && totalPages > pagerCount\\\" [page]=\\\"page\\\" [max]=\\\"totalPages\\\" (jump)=\\\"nextHandle($event)\\\" [disabled]=\\\"disabled\\\" ></thy-pagination-jump> \",\n    providers: [PAGINATION_CONTROL_VALUE_ACCESSOR, UpdateHostClassService]\n})\nexport class ThyPaginationComponent implements ControlValueAccessor, OnInit {\n    /** === 以下选项 为兼容 ngx-bootstrap 用； === */\n    @Input() align: boolean;\n    @Input() maxSize: number;\n    @Input() boundaryLinks: boolean;\n    @Input() directionLinks: boolean;\n    @Input() firstText: string;\n    @Input() previousText: string;\n    @Input() nextText: string;\n    @Input() lastText: string;\n    @Input() rotate: boolean;\n    @Input() pageBtnClass: string;\n    /** ===   === */\n\n    @HostBinding('class.thy-pagination') _pagination = true;\n\n    @HostBinding('class.disabled')\n    @Input()\n    disabled: boolean;\n\n    @Input() thyJump: boolean;\n\n    @Input() thySize: ThyPaginationMaxSize;\n\n    protected _page = 1;\n    protected _itemsPerPage: number;\n    protected _totalItems: number;\n    protected _totalPages: number;\n    public reservedNum: number;\n    public pagerSize: number;\n    public inited = false;\n    public pagerCount: number;\n    private onTouchedCallback: () => void = function() {};\n    private onChangeCallback: (_: number) => void = function() {};\n\n    // tslint:disable-next-line:member-ordering\n    @Output() numPages: EventEmitter<number> = new EventEmitter<number>();\n\n    // tslint:disable-next-line:member-ordering\n    @Output()\n    pageChanged = new EventEmitter<PageChangedEvent>();\n\n    @Input()\n    get itemsPerPage(): number {\n        return this._itemsPerPage;\n    }\n\n    set itemsPerPage(v: number) {\n        this._itemsPerPage = v;\n        if (this.totalItems !== undefined) {\n            this.totalPages = this.calculateTotalPages();\n        }\n    }\n\n    @Input()\n    get totalItems(): number {\n        return this._totalItems;\n    }\n\n    set totalItems(v: number) {\n        this._totalItems = v;\n        this.totalPages = this.calculateTotalPages();\n    }\n\n    @Input()\n    get totalPages(): number {\n        return this._totalPages;\n    }\n\n    set totalPages(v: number) {\n        this._totalPages = v;\n        this.numPages.emit(v);\n    }\n\n    @Input()\n    get page(): number {\n        return this._page;\n    }\n\n    set page(v: number) {\n        const _previous = this._page;\n        this._page = v > this.totalPages ? this.totalPages : v || 1;\n        this.onChangeCallback(v);\n\n        if (_previous === this._page || typeof _previous === 'undefined') {\n            return;\n        }\n\n        this.pageChanged.emit({\n            page: this._page,\n            itemsPerPage: this.itemsPerPage\n        });\n    }\n\n    writeValue(page: number) {\n        if (page !== this._page) {\n            this._page = page;\n        }\n    }\n\n    registerOnChange(fn: any) {\n        this.onChangeCallback = fn;\n    }\n\n    registerOnTouched(fn: any) {\n        this.onTouchedCallback = fn;\n    }\n\n    constructor(\n        private updateHostClassService: UpdateHostClassService,\n        private elementRef: ElementRef\n    ) {\n        updateHostClassService.initializeElement(elementRef.nativeElement);\n    }\n\n    ngOnInit() {\n        this.itemsPerPage =\n            typeof this.itemsPerPage !== 'undefined' ? this.itemsPerPage : 20;\n\n        this.thySize =\n            typeof this.thySize !== 'undefined' ? this.thySize : 'md';\n\n        this._setSize(this.thySize);\n\n        this.thyJump =\n            typeof this.thyJump !== 'undefined' ? this.thyJump : true;\n\n        if (typeof this.totalPages === 'undefined') {\n            this.totalPages = this.calculateTotalPages();\n        }\n\n        this.inited = true;\n    }\n\n    nextHandle(step: number): void {\n        if (this.disabled) {\n            return;\n        }\n        const nextPage: number = this.page + step;\n        this.page =\n            nextPage < 1\n                ? 1\n                : nextPage > this.totalPages\n                ? this.totalPages\n                : nextPage;\n    }\n\n    protected calculateTotalPages(): number {\n        const totalPages =\n            this.itemsPerPage < 1\n                ? 1\n                : Math.ceil(this.totalItems / this.itemsPerPage);\n        return Math.max(totalPages || 0, 1);\n    }\n\n    protected _setSize(v: ThyPaginationMaxSize) {\n        switch (v) {\n            case 'sm':\n                this.reservedNum = 1;\n                this.pagerSize = 5;\n                break;\n            case 'md':\n                this.reservedNum = 2;\n                this.pagerSize = 7;\n                break;\n            case 'xs':\n                this.thyJump =\n                    typeof this.thyJump !== 'undefined' ? this.thyJump : false;\n                this.reservedNum = 1;\n                this.pagerSize = 1;\n                this.updateHostClassService.updateClass([`thy-pagination-xs`]);\n                break;\n        }\n\n        this.pagerCount = this.pagerSize + this.reservedNum * 2;\n    }\n}\n"]}