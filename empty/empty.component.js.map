{"version":3,"file":"empty.component.js","sourceRoot":"","sources":["../../.tmp/empty/empty.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, HostBinding, TemplateRef, ElementRef, Input, OnInit, AfterViewInit, Renderer2, NgZone } from '@angular/core';\nimport { ThyTranslate } from '../shared';\nimport { ThyEmptyConfig } from './empty.config';\nimport { inputValueToBoolean } from '../util/helpers';\n\nconst sizeClassMap: any = {\n    'lg': ['empty-state', 'empty-state--lg'],\n    'md': ['empty-state'],\n    'sm': ['empty-state', 'empty-state--sm']\n};\nconst sizeMap: any = {\n    'lg': {\n        height: 164, // 空提示的高度\n        offsetTop: 30,// 空提示图标和大小之间的空白距离，需要除去，否则会不居中\n        defaultMarginTop: 120// 不自动计算默认的 top 距离\n    },\n    'md': {\n        height: 91,\n        offsetTop: 20,\n        defaultMarginTop: 10\n    },\n    'sm': {\n        height: 50,\n        offsetTop: 10,\n        defaultMarginTop: 0\n    }\n};\n\n@Component({\n    selector: 'thy-empty',\n    template: \"<span class=\\\"empty-icon\\\"><i [class]=\\\"thyIconClass || 'wtf wtf-empty-o'\\\"></i></span> <p class=\\\"empty-text\\\">{{displayText}}</p>\"\n})\nexport class ThyEmptyComponent implements OnInit, AfterViewInit {\n\n    @HostBinding('class') sizeClass = sizeClassMap['md'].join(' ');\n\n    // 显示的文本，优先级 100 最高\n    @Input() thyMessage: string;\n\n    // 显示文本的多语言 Key 优先级 99\n    @Input() thyTranslationKey: string;\n\n    @Input() thyTranslationValues: any;\n\n    // 显示默认提示信息，替换目标名称\n    @Input() thyEntityName: string;\n\n    // 显示默认提示信息，替换目标名称的 translateKey\n    @Input() thyEntityNameTranslateKey: string;\n\n    @Input() thyIconClass: string;\n\n    @Input()\n    set thySize(value: string) {\n        const classList = sizeClassMap[value || 'md'];\n        if (classList) {\n            this.sizeClass = classList.join(' ');\n        }\n    }\n\n    @Input() thyMarginTop: number | string;\n\n    @Input() thyTopAuto: boolean;\n\n    @Input() thyContainer: ElementRef;\n\n    get displayText() {\n        if (this.thyMessage) {\n            return this.thyMessage;\n        } else if (this.thyTranslationKey) {\n            return this.thyTranslate.instant(this.thyTranslationKey, this.thyTranslationValues);\n        } else if (this.thyEntityName) {\n            return this.thyTranslate.instant(this.thyEmptyConfig.noResultWithTargetTranslateKey, {\n                target: this.thyEntityName\n            });\n        } else if (this.thyEntityNameTranslateKey) {\n            return this.thyTranslate.instant(this.thyEmptyConfig.noResultWithTargetTranslateKey, {\n                target: this.thyTranslate.instant(this.thyEntityNameTranslateKey)\n            });\n        } else {\n            return this.thyTranslate.instant(this.thyEmptyConfig.noResultTranslateKey);\n        }\n    }\n\n    _calculatePosition() {\n        const sizeOptions = sizeMap[this.thySize || 'md'];\n        const topAuto = inputValueToBoolean(this.thyTopAuto);\n        let marginTop = null;\n        if (topAuto) {\n            // 选择参考父容器居中\n            const containerElement = this.thyContainer ? this.thyContainer.nativeElement : this.elementRef.nativeElement.parentElement;\n            // containerElement.height;\n            let emptyStateHeight = this.elementRef.nativeElement.offsetHeight;\n            // 高度没有自动计算出来使用默认值\n            if (emptyStateHeight <= 10) {\n                emptyStateHeight = sizeOptions.height;\n            }\n            marginTop = (containerElement.offsetHeight - emptyStateHeight) / 2 - sizeOptions.offsetTop;\n            if (marginTop < 0) {\n                marginTop = 0; // sizeOptions.defaultMarginTop;\n            }\n        } else {\n            if (this.thyMarginTop) {\n                marginTop = this.thyMarginTop;\n            } else {\n                marginTop = 0; // sizeOptions.defaultMarginTop;\n            }\n        }\n        if (marginTop) {\n            this.renderer.setStyle(this.elementRef.nativeElement, 'marginTop', marginTop + 'px');\n        }\n    }\n    constructor(\n        private thyTranslate: ThyTranslate,\n        private thyEmptyConfig: ThyEmptyConfig,\n        private elementRef: ElementRef,\n        private renderer: Renderer2,\n        private ngZone: NgZone\n    ) {\n\n    }\n\n    ngOnInit() {\n    }\n\n    ngAfterViewInit() {\n        this.ngZone.runOutsideAngular(() => {\n            setTimeout(() => {\n                this._calculatePosition();\n            }, 50);\n        });\n\n    }\n\n}\n"]}