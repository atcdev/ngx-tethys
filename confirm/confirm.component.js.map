{"version":3,"file":"confirm.component.js","sourceRoot":"","sources":["../../.tmp/confirm/confirm.component.ts"],"names":[],"mappings":";;;;;;;;;AAAA,OAAO,EAAE,SAAS,EAAqB,MAAM,eAAe,CAAC;AAC7D,OAAO,EAAE,eAAe,EAAE,MAAM,wBAAwB,CAAC;AAMzD;IAcI,6BACY,YAA6B;QAA7B,iBAAY,GAAZ,YAAY,CAAiB;IACrC,CAAC;IAEL,sCAAQ,GAAR;QACI,IAAI,IAAI,CAAC,aAAa,EAAE;YACpB,KAAK,IAAM,GAAG,IAAI,IAAI,CAAC,aAAa,EAAE;gBAClC,IAAI,IAAI,CAAC,aAAa,CAAC,cAAc,CAAC,GAAG,CAAC,EAAE;oBACxC,IAAM,MAAM,GAAG,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;oBACvC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,IAAI,GAAG,GAAG,GAAG,IAAI,EAAE,MAAM,CAAC,CAAC;iBAClE;aACJ;SACJ;IACL,CAAC;IAED,qCAAO,GAAP;QAAA,iBAeC;QAdG,IAAM,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC;QAC9C,IAAI,OAAO,IAAI,OAAO,CAAC,SAAS,EAAE;YAC9B,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;YACpB,IAAI,CAAC,eAAe,GAAG,OAAO,CAAC,SAAS,CAAC;gBACrC,IAAI,EAAE;oBACF,KAAI,CAAC,UAAU,EAAE,CAAC;gBACtB,CAAC;gBACD,QAAQ,EAAE;oBACN,KAAI,CAAC,OAAO,GAAG,KAAK,CAAC;gBACzB,CAAC;aACJ,CAAC,CAAC;SACN;aAAM;YACH,IAAI,CAAC,UAAU,EAAE,CAAC;SACrB;IACL,CAAC;IAED,wCAAU,GAAV;QACI,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,CAAC;IAC9B,CAAC;IAED,yCAAW,GAAX;QACI,IAAI,IAAI,CAAC,eAAe,EAAE;YACtB,IAAI,CAAC,eAAe,CAAC,WAAW,EAAE,CAAC;SACtC;IACL,CAAC;IAtDQ,mBAAmB;QAH/B,SAAS,CAAC;YACP,QAAQ,EAAE,4gBAA4gB;SACzhB,CAAC;yCAgB4B,eAAe;OAfhC,mBAAmB,CAuD/B;IAAD,0BAAC;CAAA,AAvDD,IAuDC;SAvDY,mBAAmB","sourcesContent":["import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { ThyModalService } from '../modal/modal.service';\nimport { ConfirmOption, ConfirmButtonsOption } from './confirm-option.interface';\n\n@Component({\n    template: \"<thy-modal> <thy-modal-header thyTitle=\\\"{{title}}\\\"></thy-modal-header> <thy-modal-body class=\\\"thy-form\\\"> <div class=\\\"form-group\\\"> <p [innerHtml]=\\\"content\\\"></p> </div> <div class=\\\"form-group\\\"> <div class=\\\"btn-pair\\\"> <button thyButton=\\\"{{buttons.confirm.type}}\\\" (click)=\\\"confirm()\\\" [thyLoading]=\\\"loading\\\" [thyLoadingText]=\\\"buttons.confirm.loadingText\\\">{{buttons.confirm.text}}</button> <button thyButton=\\\"link-secondary\\\" (click)=\\\"closeModal()\\\">取消</button> </div> </div> </thy-modal-body> </thy-modal>\"\n})\nexport class ThyConfirmComponent implements OnInit, OnDestroy {\n\n    loading: boolean;\n\n    public title: string;\n\n    public content: string;\n\n    public contentValues: any;\n\n    public buttons: ConfirmButtonsOption;\n\n    private _confirmAction$: any;\n\n    constructor(\n        private modalService: ThyModalService,\n    ) { }\n\n    ngOnInit() {\n        if (this.contentValues) {\n            for (const key in this.contentValues) {\n                if (this.contentValues.hasOwnProperty(key)) {\n                    const _value = this.contentValues[key];\n                    this.content = this.content.replace('{{' + key + '}}', _value);\n                }\n            }\n        }\n    }\n\n    confirm(): any {\n        const _action = this.buttons.confirm.action();\n        if (_action && _action.subscribe) {\n            this.loading = true;\n            this._confirmAction$ = _action.subscribe({\n                next: () => {\n                    this.closeModal();\n                },\n                complete: () => {\n                    this.loading = false;\n                }\n            });\n        } else {\n            this.closeModal();\n        }\n    }\n\n    closeModal() {\n        this.modalService.close();\n    }\n\n    ngOnDestroy() {\n        if (this._confirmAction$) {\n            this._confirmAction$.unsubscribe();\n        }\n    }\n}\n"]}