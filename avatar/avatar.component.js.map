{"version":3,"file":"avatar.component.js","sourceRoot":"","sources":["../../.tmp/avatar/avatar.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n    Component,\n    Input,\n    Output,\n    EventEmitter,\n    ElementRef,\n    HostBinding,\n    OnInit,\n    ChangeDetectionStrategy\n} from '@angular/core';\nimport { isNumber, inputValueToBoolean } from '../util/helpers';\nimport { UpdateHostClassService } from '../shared/update-host-class.service';\nimport { ThyAvatarService } from './avatar.service';\n\nconst sizeArray = [22, 24, 30, 38, 48, 68, 110, 160];\nconst sizeMap = {\n    xs: 24,\n    sm: 30,\n    md: 38,\n    lg: 48\n};\n\nconst DEFAULT_SIZE = 38;\n\n@Component({\n    selector: 'thy-avatar',\n    template: \"<img *ngIf=\\\"_src\\\" [src]=\\\"_src | thyAvatarSrc: _size\\\" class=\\\"avatar-avatar\\\" [ngClass]=\\\"thyImgClass\\\" alt=\\\"{{avatarName || ''}}\\\" /> <span *ngIf=\\\"!_src\\\" class=\\\"avatar-default\\\" [ngStyle]=\\\"avatarName | avatarBgColor\\\"> <div>{{avatarName | avatarShortName}}</div> </span> <div *ngIf=\\\"thyShowName\\\" class=\\\"avatar-name\\\">{{avatarName}}</div> <a *ngIf=\\\"_showRemove\\\" (click)=\\\"remove($event)\\\" href=\\\"javascript:;\\\" class=\\\"remove-link avatar-remove\\\"><i class=\\\"wtf wtf-times-circle\\\"></i></a>\",\n    providers: [UpdateHostClassService],\n    changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class ThyAvatarComponent implements OnInit {\n    _src: string;\n    _name: string;\n    _size: number;\n    _showRemove = false;\n\n    public avatarSrc: string;\n    public avatarName?: string;\n\n    @HostBinding('class.thy-avatar') _isAvatar = true;\n\n    @Output() thyOnRemove = new EventEmitter();\n\n    @Input() thyShowName: boolean;\n\n    @Input()\n    set thySrc(value: string) {\n        this._setAvatarSrc(value);\n    }\n\n    @Input()\n    set thyName(value: string) {\n        this._name = value;\n        this._setAvatarName();\n    }\n\n    @Input()\n    set thySize(value: number | string) {\n        if (sizeMap[value]) {\n            this._setAvatarSize(sizeMap[value]);\n        } else {\n            this._setAvatarSize((value as number) * 1);\n        }\n    }\n\n    @Input()\n    set thyShowRemove(value: boolean) {\n        this._showRemove = inputValueToBoolean(value);\n    }\n\n    @Input() thyImgClass: string;\n\n    private _setAvatarSize(size: number) {\n        if (sizeArray.indexOf(size) > -1) {\n            this._size = size;\n        } else if (size > sizeArray[sizeArray.length - 1]) {\n            this._size = sizeArray[sizeArray.length - 1];\n        } else {\n            this._size = DEFAULT_SIZE;\n        }\n    }\n\n    private _setAvatarSrc(src: string) {\n        if (src && this.thyAvatarService.ignoreAvatarSrcPaths.indexOf(src) < 0) {\n            this._src = src;\n        } else {\n            this._src = null;\n        }\n    }\n\n    private _setAvatarName() {\n        this.avatarName = this._name;\n    }\n\n    constructor(\n        private updateHostClassService: UpdateHostClassService,\n        private elementRef: ElementRef,\n        private thyAvatarService: ThyAvatarService\n    ) {\n        updateHostClassService.initializeElement(elementRef.nativeElement);\n    }\n\n    ngOnInit() {\n        if (!this._size) {\n            this._setAvatarSize(DEFAULT_SIZE);\n        }\n        this.updateHostClassService.updateClass([`thy-avatar-${this._size}`]);\n    }\n\n    remove($event: Event) {\n        this.thyOnRemove.emit($event);\n    }\n}\n"]}