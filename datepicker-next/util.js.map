{"version":3,"file":"util.js","sourceRoot":"","sources":["../../.tmp/datepicker-next/util.ts"],"names":[],"mappings":"AAAA,OAAO,EAEH,uBAAuB,EAK1B,MAAM,6BAA6B,CAAC;AACrC,OAAO,EAAE,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,MAAM,iBAAiB,CAAC;AAE7D,MAAM,UAAU,iBAAiB,CAAC,IAAU;IACxC,IAAM,OAAO,GAAG,IAAI,IAAI,IAAI,IAAI,EAAE,CAAC;IACnC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC,CAAC;IACzC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;IACnB,OAAO,OAAO,CAAC,OAAO,EAAE,CAAC;AAC7B,CAAC;AAED,MAAM,UAAU,UAAU,CAAC,KAAU,EAAE,IAAY;IAC/C,IAAM,MAAM,GAAG,EAAE,CAAC;IAClB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,EAAE,CAAC,EAAE,EAAE;QACrD,IAAM,KAAK,GAAG,CAAC,GAAG,IAAI,CAAC;QACvB,IAAM,GAAG,GAAG,KAAK,GAAG,IAAI,CAAC;QACzB,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,EAAE,GAAG,CAAC,CAAC,CAAC;KACxC;IACD,OAAO,MAAM,CAAC;AAClB,CAAC;AAED,MAAM,UAAU,mBAAmB,CAC/B,IAAY,EACZ,KAAa,EACb,GAAY;IAEZ,IAAI,KAAK,GAAG,CAAC,IAAI,KAAK,IAAI,EAAE,IAAI,GAAG,GAAG,CAAC,IAAI,GAAG,IAAI,EAAE,EAAE;QAClD,IAAM,IAAI,GAAG,IAAI,IAAI,CAAC,IAAI,EAAE,KAAK,EAAE,GAAG,IAAI,CAAC,CAAC,CAAC;QAC7C,OAAO;YACH,IAAI,EAAE,IAAI,CAAC,WAAW,EAAE;YACxB,KAAK,EAAE,IAAI,CAAC,QAAQ,EAAE;YACtB,GAAG,EAAE,IAAI,CAAC,OAAO,EAAE;SACtB,CAAC;KACL;SAAM;QACH,OAAO,EAAE,IAAI,MAAA,EAAE,KAAK,OAAA,EAAE,GAAG,KAAA,EAAE,CAAC;KAC/B;AACL,CAAC;AAED,MAAM,UAAU,eAAe,CAAC,KAAa;IACzC,IAAI,KAAK,GAAG,EAAE,EAAE;QACZ,OAAO,MAAI,KAAO,CAAC;KACtB;IACD,OAAO,KAAK,GAAG,EAAE,CAAC;AACtB,CAAC;AAED,MAAM,UAAU,oBAAoB,CAChC,KAA8B;IAE9B,OAAO;QACH,IAAI,EAAE,gBAAgB,CAAC,KAAK,CAAC;QAC7B,KAAK,EAAE,KAAK;KACf,CAAC;AACN,CAAC;AAED,MAAM,UAAU,gBAAgB,CAC5B,KAA8B;IAE9B,IAAI,GAAG,CAAC;IACR,IAAI,MAAM,CAAC,KAAK,CAAC,EAAE;QACf,GAAG,GAAG,uBAAuB,CAAC,IAAI,CAAC;KACtC;SAAM,IAAI,QAAQ,CAAC,KAAK,CAAC,EAAE;QACxB,IAAI,KAAK,CAAC,cAAc,CAAC,MAAM,CAAC,EAAE;YAC9B,IAAM,MAAM,GAAG,gBAAgB,CAAE,KAAa,CAAC,IAAI,CAAC,CAAC;YACrD,QAAQ,MAAM,EAAE;gBACZ,KAAK,uBAAuB,CAAC,SAAS;oBAClC,GAAG,GAAG,uBAAuB,CAAC,eAAe,CAAC;oBAC9C,MAAM;gBACV,KAAK,uBAAuB,CAAC,aAAa;oBACtC,GAAG,GAAG,uBAAuB,CAAC,mBAAmB,CAAC;oBAClD,MAAM;gBACV,KAAK,uBAAuB,CAAC,IAAI;oBAC7B,GAAG,GAAG,uBAAuB,CAAC,UAAU,CAAC;oBACzC,MAAM;gBACV,KAAK,uBAAuB,CAAC,KAAK;oBAC9B,GAAG,GAAG,uBAAuB,CAAC,WAAW,CAAC;oBAC1C,MAAM;aACb;SACJ;aAAM;YACH,GAAG,GAAG,uBAAuB,CAAC,WAAW,CAAC;SAC7C;KACJ;SAAM,IAAI,QAAQ,CAAC,KAAK,CAAC,EAAE;QACxB,IAAI,KAAK,CAAC,QAAQ,EAAE,CAAC,MAAM,KAAK,EAAE,EAAE;YAChC,GAAG,GAAG,uBAAuB,CAAC,SAAS,CAAC;SAC3C;aAAM,IAAI,KAAK,CAAC,QAAQ,EAAE,CAAC,MAAM,KAAK,EAAE,EAAE;YACvC,GAAG,GAAG,uBAAuB,CAAC,aAAa,CAAC;SAC/C;aAAM;YACH,GAAG,GAAG,uBAAuB,CAAC,KAAK,CAAC;SACvC;KACJ;SAAM;QACH,GAAG,GAAG,uBAAuB,CAAC,KAAK,CAAC;KACvC;IACD,OAAO,GAAG,CAAC;AACf,CAAC;AAED,MAAM,UAAU,sCAAsC,CAClD,IAA4B;IAE5B,IAAM,MAAM,GAA0B,EAAE,CAAC;IACzC,IAAI,KAAK,CAAC;IACV,IAAI,SAAS,GAAQ,KAAK,CAAC;IAC3B,QAAQ,IAAI,CAAC,IAAI,EAAE;QACf,KAAK,uBAAuB,CAAC,eAAe;YACxC,KAAK,GAAG,IAAI,IAAI,CAAE,IAAI,CAAC,KAAK,CAAC,IAAe,GAAG,IAAI,CAAC,CAAC;YACrD,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC;YACjC,MAAM;QACV,KAAK,uBAAuB,CAAC,mBAAmB;YAC5C,KAAK,GAAG,IAAI,IAAI,CAAE,IAAI,CAAC,KAAa,CAAC,IAAI,CAAC,CAAC;YAC3C,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC;YACjC,MAAM;QACV,KAAK,uBAAuB,CAAC,UAAU;YACnC,KAAK,GAAI,IAAI,CAAC,KAAa,CAAC,IAAI,CAAC;YACjC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC;YACjC,MAAM;QACV,KAAK,uBAAuB,CAAC,SAAS;YAClC,KAAK,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,CAAC;YACpC,MAAM;QACV,KAAK,uBAAuB,CAAC,aAAa;YACtC,KAAK,GAAG,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAC7B,MAAM;QACV,KAAK,uBAAuB,CAAC,IAAI;YAC7B,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;YACnB,MAAM;KACb;IACD,IAAI,KAAK,EAAE;QACP,MAAM,CAAC,IAAI,GAAG,KAAK,CAAC,WAAW,EAAE,CAAC;QAClC,MAAM,CAAC,KAAK,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC;QAChC,MAAM,CAAC,GAAG,GAAG,KAAK,CAAC,OAAO,EAAE,CAAC;QAC7B,IAAI,SAAS,EAAE;YACX,MAAM,CAAC,IAAI,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC;YAC/B,MAAM,CAAC,MAAM,GAAG,KAAK,CAAC,UAAU,EAAE,CAAC;SACtC;KACJ;IACD,OAAO;QACH,IAAI,EAAE,IAAI,CAAC,IAAI;QACf,KAAK,EAAE,MAAM;KAChB,CAAC;AACN,CAAC;AAED,MAAM,UAAU,wCAAwC,CACpD,IAA6B;IAE7B,IAAM,IAAI,GAAG,IAAI,IAAI,CACjB,IAAI,CAAC,KAAK,CAAC,IAAI,EACf,IAAI,CAAC,KAAK,CAAC,KAAK,EAChB,IAAI,CAAC,KAAK,CAAC,GAAG,EACd,IAAI,CAAC,KAAK,CAAC,IAAI,IAAI,IAAI,EACvB,IAAI,CAAC,KAAK,CAAC,MAAM,IAAI,IAAI,CAC5B,CAAC;IACF,IAAI,MAAM,GAA4B,EAAE,CAAC;IACzC,QAAQ,IAAI,CAAC,UAAU,EAAE;QACrB,KAAK,uBAAuB,CAAC,eAAe,CAAC;QAC7C,KAAK,uBAAuB,CAAC,WAAW;YACpC,MAAM,CAAC,IAAI,GAAG,YAAY,CAAC,IAAI,CAAC,CAAC;YACjC,MAAM,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,KAAK,SAAS,CAAC;YACjD,MAAM;QACV,KAAK,uBAAuB,CAAC,mBAAmB;YAC5C,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;YAC7B,MAAM,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,KAAK,SAAS,CAAC;YACjD,MAAM;QACV,KAAK,uBAAuB,CAAC,UAAU;YACnC,MAAM,CAAC,IAAI,GAAG,IAAI,CAAC;YACnB,MAAM,CAAC,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,KAAK,SAAS,CAAC;YACjD,MAAM;QACV,KAAK,uBAAuB,CAAC,SAAS,CAAC;QACvC,KAAK,uBAAuB,CAAC,KAAK;YAC9B,MAAM,GAAG,YAAY,CAAC,IAAI,CAAC,CAAC;YAC5B,MAAM;QACV,KAAK,uBAAuB,CAAC,aAAa;YACtC,MAAM,GAAG,IAAI,CAAC,OAAO,EAAE,CAAC;YACxB,MAAM;QACV,KAAK,uBAAuB,CAAC,IAAI;YAC7B,MAAM,GAAG,IAAI,CAAC;YACd,MAAM;KACb;IACD,OAAO,MAAM,CAAC;AAClB,CAAC;AAED,MAAM,UAAU,YAAY,CAAC,IAAU;IACnC,OAAO,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,OAAO,EAAE,GAAG,IAAI,CAAC,CAAC;AAC7C,CAAC","sourcesContent":["import {\n    ThyDatepickerNextCalendarDate,\n    DatepickerValueTypeEnum,\n    DatepickerNextValueType,\n    ThyDatepickerNextInfo,\n    ValueInRxPipeInterface,\n    ValueOutRxPipeInterface\n} from './datepicker-next.interface';\nimport { isDate, isObject, isNumber } from '../util/helpers';\n\nexport function getCountMonthDays(date: Date) {\n    const curDate = date || new Date();\n    curDate.setMonth(curDate.getMonth() + 1);\n    curDate.setDate(0);\n    return curDate.getDate();\n}\n\nexport function sliceArray(array: any, size: number) {\n    const result = [];\n    for (let x = 0; x < Math.ceil(array.length / size); x++) {\n        const start = x * size;\n        const end = start + size;\n        result.push(array.slice(start, end));\n    }\n    return result;\n}\n\nexport function calendarDateConvert(\n    year: number,\n    month: number,\n    day?: number\n): ThyDatepickerNextCalendarDate {\n    if (month < 0 || month >= 12 || day < 0 || day >= 28) {\n        const date = new Date(year, month, day || 1);\n        return {\n            year: date.getFullYear(),\n            month: date.getMonth(),\n            day: date.getDate()\n        };\n    } else {\n        return { year, month, day };\n    }\n}\n\nexport function getFullTimeText(value: number): string {\n    if (value < 10) {\n        return `0${value}`;\n    }\n    return value + '';\n}\n\nexport function exploreValueTypePipe(\n    value: DatepickerNextValueType\n): ValueInRxPipeInterface {\n    return {\n        type: exploreValueType(value),\n        value: value\n    };\n}\n\nexport function exploreValueType(\n    value: DatepickerNextValueType\n): DatepickerValueTypeEnum {\n    let res;\n    if (isDate(value)) {\n        res = DatepickerValueTypeEnum.date;\n    } else if (isObject(value)) {\n        if (value.hasOwnProperty('date')) {\n            const result = exploreValueType((value as any).date);\n            switch (result) {\n                case DatepickerValueTypeEnum.timestamp:\n                    res = DatepickerValueTypeEnum.objectTimestamp;\n                    break;\n                case DatepickerValueTypeEnum.timestampLong:\n                    res = DatepickerValueTypeEnum.objectTimestampLong;\n                    break;\n                case DatepickerValueTypeEnum.date:\n                    res = DatepickerValueTypeEnum.objectDate;\n                    break;\n                case DatepickerValueTypeEnum.empty:\n                    res = DatepickerValueTypeEnum.objectEmpty;\n                    break;\n            }\n        } else {\n            res = DatepickerValueTypeEnum.objectEmpty;\n        }\n    } else if (isNumber(value)) {\n        if (value.toString().length === 10) {\n            res = DatepickerValueTypeEnum.timestamp;\n        } else if (value.toString().length === 13) {\n            res = DatepickerValueTypeEnum.timestampLong;\n        } else {\n            res = DatepickerValueTypeEnum.empty;\n        }\n    } else {\n        res = DatepickerValueTypeEnum.empty;\n    }\n    return res;\n}\n\nexport function combiningDataAccordingToDatepickerType(\n    data: ValueInRxPipeInterface\n): ValueInRxPipeInterface {\n    const _value: ThyDatepickerNextInfo = {};\n    let _date;\n    let _withTime: any = false;\n    switch (data.type) {\n        case DatepickerValueTypeEnum.objectTimestamp:\n            _date = new Date((data.value.date as number) * 1000);\n            _withTime = data.value.with_time;\n            break;\n        case DatepickerValueTypeEnum.objectTimestampLong:\n            _date = new Date((data.value as any).date);\n            _withTime = data.value.with_time;\n            break;\n        case DatepickerValueTypeEnum.objectDate:\n            _date = (data.value as any).date;\n            _withTime = data.value.with_time;\n            break;\n        case DatepickerValueTypeEnum.timestamp:\n            _date = new Date(data.value * 1000);\n            break;\n        case DatepickerValueTypeEnum.timestampLong:\n            _date = new Date(data.value);\n            break;\n        case DatepickerValueTypeEnum.date:\n            _date = data.value;\n            break;\n    }\n    if (_date) {\n        _value.year = _date.getFullYear();\n        _value.month = _date.getMonth();\n        _value.day = _date.getDate();\n        if (_withTime) {\n            _value.hour = _date.getHours();\n            _value.minute = _date.getMinutes();\n        }\n    }\n    return {\n        type: data.type,\n        value: _value\n    };\n}\n\nexport function combiningDataAccordingToOriginalDataType(\n    data: ValueOutRxPipeInterface\n): DatepickerNextValueType {\n    const date = new Date(\n        data.value.year,\n        data.value.month,\n        data.value.day,\n        data.value.hour || null,\n        data.value.minute || null\n    );\n    let result: DatepickerNextValueType = {};\n    switch (data.originType) {\n        case DatepickerValueTypeEnum.objectTimestamp:\n        case DatepickerValueTypeEnum.objectEmpty:\n            result.date = getTimestamp(date);\n            result.with_time = data.value.hour !== undefined;\n            break;\n        case DatepickerValueTypeEnum.objectTimestampLong:\n            result.date = date.getTime();\n            result.with_time = data.value.hour !== undefined;\n            break;\n        case DatepickerValueTypeEnum.objectDate:\n            result.date = date;\n            result.with_time = data.value.hour !== undefined;\n            break;\n        case DatepickerValueTypeEnum.timestamp:\n        case DatepickerValueTypeEnum.empty:\n            result = getTimestamp(date);\n            break;\n        case DatepickerValueTypeEnum.timestampLong:\n            result = date.getTime();\n            break;\n        case DatepickerValueTypeEnum.date:\n            result = date;\n            break;\n    }\n    return result;\n}\n\nexport function getTimestamp(date: Date) {\n    return Math.floor(date.getTime() / 1000);\n}\n"]}