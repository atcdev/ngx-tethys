{"version":3,"file":"switch.component.js","sourceRoot":"","sources":["../../.tmp/switch/switch.component.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n    Component,\n    Input,\n    Output,\n    EventEmitter,\n    OnInit,\n    forwardRef,\n    ElementRef,\n    ViewChild,\n    OnChanges,\n    SimpleChanges\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { helpers } from '../util';\nimport { UpdateHostClassService } from '../shared';\n\n\n@Component({\n    selector: 'thy-switch',\n    template: \"<label #switch class=\\\"thy-switch\\\" [ngClass]=\\\"classNames\\\"> <input type=\\\"checkbox\\\" [disabled]=\\\"disabled\\\" class=\\\"thy-switch-input\\\" [checked]=\\\"model\\\" (change)=\\\"toggle($event)\\\"> <span class=\\\"thy-switch-label\\\"></span> <span class=\\\"thy-switch-handle\\\"></span> </label>\",\n    providers: [\n        {\n            provide: NG_VALUE_ACCESSOR,\n            useExisting: forwardRef(() => ThySwitchComponent),\n            multi: true\n        }]\n})\nexport class ThySwitchComponent implements OnInit, ControlValueAccessor, OnChanges {\n\n    public model: any;\n\n    public type?: String = 'primary';\n\n    public size?: String = '';\n\n    public disabled?: Boolean = false;\n\n    public classNames: string[];\n\n    public typeArray: any = ['primary', 'info', 'warning', 'danger'];\n\n    public sizeArray: any = ['lg', '', 'sm'];\n\n    @ViewChild('switch') switchElementRef: ElementRef;\n\n    @Input()\n    set thyType(value: string) {\n        if (!this.typeArray.includes(value)) {\n            value = 'primary';\n        }\n        this.type = value;\n    }\n\n    @Input()\n    set thySize(value: string) {\n        if (!this.sizeArray.includes(value)) {\n            value = '';\n        }\n        this.size = value;\n    }\n\n\n    @Input() thyDisabled: boolean;\n\n    @Output() thyChange: EventEmitter<Event> = new EventEmitter<Event>();\n\n    constructor() {\n\n    }\n\n    ngOnInit() {\n        this.setClassNames();\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        // 兼容降级后的Switch，使用onChanges\n        if (changes.thyDisabled) {\n            const value = changes.thyDisabled.currentValue;\n            this.disabled = helpers.isBoolean(value) ? Boolean(value) : (value === 'true' || value === '1');\n            this.setClassNames();\n        }\n    }\n\n    public onModelChange: Function = () => { };\n\n    public onModelTouched: Function = () => { };\n\n\n    writeValue(value: any) {\n        this.model = value;\n        // this.setClassNames();\n    }\n\n    registerOnChange(fn: Function): void {\n        this.onModelChange = fn;\n    }\n\n    registerOnTouched(fn: Function): void {\n        this.onModelTouched = fn;\n    }\n\n    setDisabledState(isDisabled: Boolean) {\n        this.disabled = isDisabled;\n        this.setClassNames();\n    }\n\n    toggle(event: any) {\n        this.model = !this.model;\n        this.onModelChange(this.model);\n        this.thyChange.emit(event);\n\n    }\n\n    setClassNames() {\n        this.classNames = [`thy-switch-${this.type}`];\n        if (this.size) {\n            this.classNames.push(`thy-switch-${this.size}`);\n        }\n        if (this.disabled) {\n            this.classNames.push(`thy-switch-disabled`);\n            if (this.model) {\n                this.classNames.push(`thy-switch-disabled-true`);\n            }\n        }\n    }\n}\n\n"]}