{"version":3,"file":"redux_devtools.js","sourceRoot":"","sources":["../../../.tmp/store/plugins/redux_devtools.ts"],"names":[],"mappings":"AAAA;IAAA;IAIA,CAAC;IAAD,kBAAC;AAAD,CAAC,AAJD,IAIC;;AAQD,MAAM,UAAU,gBAAgB;IAC5B,OAAO,QAAQ,CAAC;AACpB,CAAC;AAED;IAII;QAHQ,cAAS,GAAiC,IAAI,CAAC;QAEvD,YAAO,GAAG,MAAM,CAAC;QAGb,IAAI,IAAI,CAAC,OAAO,IAAI,IAAI,EAAE;YACtB,OAAO;SACV;QACD,IAAM,cAAc,GACf,IAAI,CAAC,OAAe,CAAC,8BAA8B,CAAC;YACpD,IAAI,CAAC,OAAe,CAAC,mBAAmB,CAAC,CAAC;QAE/C,IAAI,CAAC,cAAc,EAAE;YACjB,OAAO,CAAC,GAAG,CAAC,2FAAoC,CAAC,CAAC;YAClD,OAAO,CAAC,GAAG,CAAC,yFAA2D,CAAC,CAAC;YACzE,OAAO;SACV;QACD,IAAI,CAAC,SAAS,GAAG,cAAc,CAAC,OAAO,CAAC;YACpC,IAAI,EAAE,cAAY,gBAAgB,EAAI;SACzC,CAAC,CAAC;IACP,CAAC;IAED,4CAAc,GAAd,UAAe,UAAkB,EAAE,KAAa;QAC5C,IAAI,IAAI,CAAC,kBAAkB,EAAE,EAAE;YAC3B,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC;SAC1C;IACL,CAAC;IAED,gDAAkB,GAAlB;QACI,IAAI,IAAI,CAAC,SAAS,KAAK,IAAI,EAAE;YACzB,OAAO,KAAK,CAAC;SAChB;QACD,OAAO,IAAI,CAAC;IAChB,CAAC;IACL,0BAAC;AAAD,CAAC,AAnCD,IAmCC;;AAED,SAAS,sBAAsB;IAC3B,IAAI,CAAC,MAAM,CAAC,2BAA2B,CAAC,EAAE;QACtC,MAAM,CAAC,2BAA2B,CAAC,GAAG,IAAI,mBAAmB,EAAE,CAAC;KACnE;IACD,OAAO,MAAM,CAAC,2BAA2B,CAAC,CAAC;AAC/C,CAAC;AAED,eAAe,sBAAsB,CAAC","sourcesContent":["export abstract class StorePlugin {\n    // abstract handleNewState(state: Readonly<object>): void;\n    abstract handleNewState(actionName: string, state: Readonly<object>): void;\n    abstract isConnectSuccessed(): boolean;\n}\n/**\n * @internal\n */\nexport interface ReduxDevtoolsInstance {\n    send(action: string, state: object): void;\n}\n\nexport function tinyStateVersion(): string {\n    return 'v0.6.0';\n}\n\nexport class ReduxDevtoolsPlugin implements StorePlugin {\n    private _devTools: ReduxDevtoolsInstance | null = null;\n\n    _window = window;\n    constructor(\n    ) {\n        if (this._window == null) {\n            return;\n        }\n        const globalDevtools: { connect(config: any): ReduxDevtoolsInstance } | undefined =\n            (this._window as any)['__REDUX_DEVTOOLS_EXTENSION__'] ||\n            (this._window as any)['devToolsExtension'];\n\n        if (!globalDevtools) {\n            console.log(`未安装Chrome浏览器的拓展插件: Redux DevTools.`);\n            console.log(`插件下载地址: https://www.chromefor.com/redux-devtools_v2-17-0/`);\n            return;\n        }\n        this._devTools = globalDevtools.connect({\n            name: `NgxStore ${tinyStateVersion()}`\n        });\n    }\n\n    handleNewState(actionName: string, state: object): void {\n        if (this.isConnectSuccessed()) {\n            this._devTools.send(actionName, state);\n        }\n    }\n\n    isConnectSuccessed(): boolean {\n        if (this._devTools === null) {\n            return false;\n        }\n        return true;\n    }\n}\n\nfunction getReduxDevToolsPlugin(): any {\n    if (!window[`___ReduxDevtoolsPlugin___`]) {\n        window[`___ReduxDevtoolsPlugin___`] = new ReduxDevtoolsPlugin();\n    }\n    return window[`___ReduxDevtoolsPlugin___`];\n}\n\nexport default getReduxDevToolsPlugin;\n"]}