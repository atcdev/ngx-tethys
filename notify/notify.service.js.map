{"version":3,"file":"notify.service.js","sourceRoot":"","sources":["../../.tmp/notify/notify.service.ts"],"names":[],"mappings":";;;;;;;;;AAAA,OAAO,EAAE,UAAU,EAAe,MAAM,eAAe,CAAC;AAExD,OAAO,EAAE,2BAA2B,EAAE,MAAM,8BAA8B,CAAC;AAC3E,OAAO,EAAE,sBAAsB,EAAmB,MAAM,gCAAgC,CAAC;AACzF,OAAO,EAAE,OAAO,EAAE,MAAM,MAAM,CAAC;AAE/B,IAAM,qBAAqB,GAAG;IAC1B,QAAQ,EAAE,IAAI;IACd,YAAY,EAAE,IAAI;IAClB,QAAQ,EAAE,CAAC;CACd,CAAC;AAGF;IAaI,0BACY,GAA2B;QAA3B,QAAG,GAAH,GAAG,CAAwB;QAZvC,iBAAY,GAAiB,IAAI,OAAO,EAAE,CAAC;QAEnC,iBAAY,GAAsB,EAAE,CAAC;QAIrC,kBAAa,GAAG,CAAC,CAAC;IAOtB,CAAC;IAEL,+BAAI,GAAJ,UAAK,MAAuB;QACxB,IAAI,CAAC,6BAA6B,EAAE,CAAC;QACrC,IAAI,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,qBAAqB,CAAC,QAAQ,EAAE;YAC3D,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,CAAC;SAC7B;QACD,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC,CAAC;QACnD,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;IAC9C,CAAC;IAED,kCAAO,GAAP,UAAQ,KAAc,EAAE,OAAgB,EAAE,MAAe;QACrD,IAAI,CAAC,IAAI,CAAC;YACN,IAAI,EAAE,SAAS;YACf,KAAK,EAAE,KAAK,IAAI,IAAI;YACpB,OAAO,EAAE,OAAO;YAChB,MAAM,EAAE,MAAM;SACjB,CAAC,CAAC;IACP,CAAC;IAED,+BAAI,GAAJ,UAAK,KAAc,EAAE,OAAgB,EAAE,MAAe;QAClD,IAAI,CAAC,IAAI,CAAC;YACN,IAAI,EAAE,MAAM;YACZ,KAAK,EAAE,KAAK,IAAI,IAAI;YACpB,OAAO,EAAE,OAAO;YAChB,MAAM,EAAE,MAAM;SACjB,CAAC,CAAC;IACP,CAAC;IAED,kCAAO,GAAP,UAAQ,KAAc,EAAE,OAAgB,EAAE,MAAe;QACrD,IAAI,CAAC,IAAI,CAAC;YACN,IAAI,EAAE,SAAS;YACf,KAAK,EAAE,KAAK,IAAI,IAAI;YACpB,OAAO,EAAE,OAAO;YAChB,MAAM,EAAE,MAAM;SACjB,CAAC,CAAC;IACP,CAAC;IAED,gCAAK,GAAL,UAAM,KAAc,EAAE,OAAgB,EAAE,MAAe;QACnD,IAAI,CAAC,IAAI,CAAC;YACN,IAAI,EAAE,OAAO;YACb,KAAK,EAAE,KAAK,IAAI,IAAI;YACpB,OAAO,EAAE,OAAO;YAChB,MAAM,EAAE,MAAM;SACjB,CAAC,CAAC;IACP,CAAC;IAED,yCAAc,GAAd,UAAe,EAAU;QACrB,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,UAAA,IAAI;YAC7C,OAAO,IAAI,CAAC,EAAE,KAAK,EAAE,CAAC;QAC1B,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC;IAC9C,CAAC;IAEO,wDAA6B,GAArC;QACI,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE;YACrB,IAAI,CAAC,aAAa,GAAG,IAAI,CAAC,GAAG,CAAC,YAAY,CACtC,IAAI,EACJ,IAAI,EACJ,IAAI,CACP,CAAC;YACF,IAAI,CAAC,aAAa;iBACb,MAAM,CAAC,2BAA2B,CAAC;iBACnC,EAAE,CAAC,MAAM,CAAC;iBACV,IAAI,CAAC;gBACF,YAAY,EAAE;oBACV,YAAY,EAAE,IAAI,CAAC,YAAY;iBAClC;aACJ,CAAC,CAAC;SACV;IACL,CAAC;IAEO,wCAAa,GAArB,UAAsB,MAAuB;QACzC,OAAO,MAAM,CAAC,MAAM,CAChB,EAAE,EACF,qBAAqB,EACrB,EAAE,EAAE,EAAE,IAAI,CAAC,aAAa,EAAE,EAAE,EAC5B,MAAM,CACT,CAAC;IACN,CAAC;IA9FQ,gBAAgB;QAD5B,UAAU,EAAE;yCAeQ,sBAAsB;OAd9B,gBAAgB,CA+F5B;IAAD,uBAAC;CAAA,AA/FD,IA+FC;SA/FY,gBAAgB","sourcesContent":["import { Injectable, TemplateRef } from '@angular/core';\nimport { ThyNotifyOption } from './notify-option.interface';\nimport { ThyNotifyContainerComponent } from './notify.container.component';\nimport { ComponentLoaderFactory, ComponentLoader } from 'ngx-bootstrap/component-loader';\nimport { Subject } from 'rxjs';\n\nconst NOTIFY_OPTION_DEFAULT = {\n    duration: 4500,\n    pauseOnHover: true,\n    maxStack: 8\n};\n\n@Injectable()\nexport class ThyNotifyService {\n\n    notifyQueue$: Subject<any> = new Subject();\n\n    private _notifyQueue: ThyNotifyOption[] = [];\n\n    private _option: ThyNotifyOption;\n\n    private _lastNotifyId = 0;\n\n    private _notifyLoader: ComponentLoader<ThyNotifyContainerComponent>;\n\n\n    constructor(\n        private clf: ComponentLoaderFactory\n    ) { }\n\n    show(option: ThyNotifyOption) {\n        this._loadNotifyContainerComponent();\n        if (this._notifyQueue.length > NOTIFY_OPTION_DEFAULT.maxStack) {\n            this._notifyQueue.shift();\n        }\n        this._notifyQueue.push(this._formatOption(option));\n        this.notifyQueue$.next(this._notifyQueue);\n    }\n\n    success(title?: string, content?: string, detail?: string) {\n        this.show({\n            type: 'success',\n            title: title || '成功',\n            content: content,\n            detail: detail,\n        });\n    }\n\n    info(title?: string, content?: string, detail?: string) {\n        this.show({\n            type: 'info',\n            title: title || '提示',\n            content: content,\n            detail: detail,\n        });\n    }\n\n    warning(title?: string, content?: string, detail?: string) {\n        this.show({\n            type: 'warning',\n            title: title || '警告',\n            content: content,\n            detail: detail,\n        });\n    }\n\n    error(title?: string, content?: string, detail?: string) {\n        this.show({\n            type: 'error',\n            title: title || '错误',\n            content: content,\n            detail: detail,\n        });\n    }\n\n    removeItemById(id: number) {\n        this._notifyQueue = this._notifyQueue.filter(item => {\n            return item.id !== id;\n        });\n        this.notifyQueue$.next(this._notifyQueue);\n    }\n\n    private _loadNotifyContainerComponent() {\n        if (!this._notifyLoader) {\n            this._notifyLoader = this.clf.createLoader<ThyNotifyContainerComponent>(\n                null,\n                null,\n                null\n            );\n            this._notifyLoader\n                .attach(ThyNotifyContainerComponent)\n                .to('body')\n                .show({\n                    initialState: {\n                        notifyQueue$: this.notifyQueue$\n                    }\n                });\n        }\n    }\n\n    private _formatOption(option: ThyNotifyOption) {\n        return Object.assign(\n            {},\n            NOTIFY_OPTION_DEFAULT,\n            { id: this._lastNotifyId++ },\n            option\n        );\n    }\n}\n"]}