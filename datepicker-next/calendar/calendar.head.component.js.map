{"version":3,"file":"calendar.head.component.js","sourceRoot":"","sources":["../../../.tmp/datepicker-next/calendar/calendar.head.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, OnInit, Input, Output, EventEmitter, OnDestroy } from '@angular/core';\nimport { ThyDatepickerNextStore, DatepickerNextState, datepickerNextActions } from '../datepicker-next.store';\nimport { forkJoin, Subject } from 'rxjs';\nimport { DatepickerNextCalendarViewModeEnum } from '../datepicker-next.interface';\nimport { CALENDAR_YEAR_CONSTANT } from './calendar-year.component';\nimport { takeUntil } from 'rxjs/operators';\n\n@Component({\n    selector: 'thy-datepicker-next-calendar-head',\n    template: \"<div class=\\\"calendar-head\\\"> <span class=\\\"calendar-button-previous\\\" href=\\\"javascript:;\\\" (click)=\\\"viewPreClick()\\\"> <i class=\\\"wtf wtf-angle-left\\\"></i> </span> <span class=\\\"calendar-navigation\\\" href=\\\"javascript:;\\\" (click)=\\\"changeViewMode()\\\">{{navigationText}}</span> <span class=\\\"calendar-button-next\\\" href=\\\"javascript:;\\\" (click)=\\\"viewNextClick()\\\"> <i class=\\\"wtf wtf-angle-right\\\"></i> </span> </div> \"\n})\n\nexport class ThyDatepickerNextCalendarHeadComponent implements OnInit, OnDestroy {\n\n    @Output() preClick: EventEmitter<Event> = new EventEmitter<Event>();\n\n    @Output() nextClick: EventEmitter<Event> = new EventEmitter<Event>();\n\n    navigationText: string;\n\n    private ngUnsubscribe$ = new Subject();\n\n    constructor(\n        public store: ThyDatepickerNextStore,\n    ) { }\n\n    ngOnInit() {\n        this.store.select(ThyDatepickerNextStore.calendarCurrent)\n            .pipe(takeUntil(this.ngUnsubscribe$))\n            .subscribe(n => {\n                this._combinationNavigationText();\n            });\n    }\n\n    changeViewMode() {\n        const mode = this.store.snapshot.calendarViewMode;\n        let jumpMode;\n        if (mode === DatepickerNextCalendarViewModeEnum.day) {\n            jumpMode = DatepickerNextCalendarViewModeEnum.year;\n        } else if (mode === DatepickerNextCalendarViewModeEnum.month) {\n            jumpMode = DatepickerNextCalendarViewModeEnum.year;\n        } else {\n            return;\n        }\n\n        this.store.dispatch(datepickerNextActions.changeCalendarViewMode, {\n            viewMode: jumpMode\n        });\n    }\n\n    viewPreClick() {\n        this.preClick.emit();\n    }\n\n    viewNextClick() {\n        this.nextClick.emit();\n    }\n\n    _combinationNavigationText() {\n        const mode = this.store.snapshot.calendarViewMode;\n        if (mode === DatepickerNextCalendarViewModeEnum.day) {\n            this.navigationText = `${this.store.snapshot.calendarCurrent.year}年${this.store.snapshot.calendarCurrent.month + 1}月`;\n        } else if (mode === DatepickerNextCalendarViewModeEnum.month) {\n            this.navigationText = `${this.store.snapshot.calendarCurrent.year}年`;\n        } else if (mode === DatepickerNextCalendarViewModeEnum.year) {\n            let begin: number, end: number;\n            begin = this.store.snapshot.calendarCurrent.year\n                + CALENDAR_YEAR_CONSTANT.currentReciprocalPosition\n                - CALENDAR_YEAR_CONSTANT.yearInterval;\n            end = this.store.snapshot.calendarCurrent.year + CALENDAR_YEAR_CONSTANT.currentReciprocalPosition - 1;\n            this.navigationText = `${begin}~${end}`;\n        }\n    }\n\n    ngOnDestroy(): void {\n        this.ngUnsubscribe$.next();\n        this.ngUnsubscribe$.complete();\n    }\n}\n"]}